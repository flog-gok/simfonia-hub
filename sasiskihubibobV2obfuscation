local config = {
    name = "KeySystemCoreGUI",
    freeScript = "https://raw.githubusercontent.com/flog-gok/simfonia-hub/refs/heads/main/free",
    paidScript = "https://raw.githubusercontent.com/flog-gok/simfonia-hub/refs/heads/main/paid"
}

local coreGui = game:GetService("CoreGui")
local tweenService = game:GetService("TweenService")
local userInputService = game:GetService("UserInputService")

-- Destroy existing GUI if it exists
if coreGui:FindFirstChild(config.name) then
    coreGui[config.name]:Destroy()
end

-- Secure key list (32-character random alphanumeric strings)
local keys = {
    "7a9f3b2c1d8e4f6a9b3c2d1e8f7a9b3c",
    "4e8c1a9f3b2d7e6a4c9b3f1d2e8a7c6b",
    "9b3f2c1a8e7d4f6a9c3b2e1d7a8f6c4e",
    "2d7a9f3c1b8e4a6d9f3c2b1e7a8d6c4f",
    "6b3e1a9f7c2d8a4f6e9c3b1d2a7f8c6e",
    "1a8f3c2b9e7d4a6f9c3e1b2d8a7f6c4e",
    "8c4a9f3b2e7d1a6f9c3b2e1d8a7f6c4e",
    "3f9b2c1a8e7d4a6f9c3b2e1d8a7f6c4e",
    "7e3a9f2c1b8d4a6f9c3b2e1d8a7f6c4e",
    "2c8f3a9b1e7d4a6f9c3b2e1d8a7f6c4e",
    "9f4a3c2b8e7d1a6f9c3b2e1d8a7f6c4e",
    "1b7e9f3c2a8d4a6f9c3b2e1d8a7f6c4e",
    "6a9f3c2b8e7d1a4f9c3b2e1d8a7f6c4e",
    "4c2a9f3b8e7d1a6f9c3b2e1d8a7f6c4e",
    "8f3a9c2b1e7d4a6f9c3b2e1d8a7f6c4e",
    "3b9f2c1a8e7d4a6f9c3b2e1d8a7f6c4e",
    "7e2a9f3c1b8d4a6f9c3b2e1d8a7f6c4e",
    "2c8f3a9b1e7d4a6f9c3b2e1d8a7f6c4e",
    "9f4a3c2b8e7d1a6f9c3b2e1d8a7f6c4e",
    "1b7e9f3c2a8d4a6f9c3b2e1d8a7f6c4e",
    "6a9f3c2b8e7d1a4f9c3b2e1d8a7f6c4e",
    "4c2a9f3b8e7d1a6f9c3b2e1d8a7f6c4e",
    "8f3a9c2b1e7d4a6f9c3b2e1d8a7f6c4e",
    "3b9f2c1a8e7d4a6f9c3b2e1d8a7f6c4e",
    "7e2a9f3c1b8d4a6f9c3b2e1d8a7f6c4e",
    "2c8f3a9b1e7d4a6f9c3b2e1d8a7f6c4e",
    "9f4a3c2b8e7d1a6f9c3b2e1d8a7f6c4e",
    "1b7e9f3c2a8d4a6f9c3b2e1d8a7f6c4e",
    "6a9f3c2b8e7d1a4f9c3b2e1d8a7f6c4e",
    "4c2a9f3b8e7d1a6f9c3b2e1d8a7f6c4e",
    "8f3a9c2b1e7d4a6f9c3b2e1d8a7f6c4e",
    "3b9f2c1a8e7d4a6f9c3b2e1d8a7f6c4e",
    "7e2a9f3c1b8d4a6f9c3b2e1d8a7f6c4e",
    "2c8f3a9b1e7d4a6f9c3b2e1d8a7f6c4e",
    "9f4a3c2b8e7d1a6f9c3b2e1d8a7f6c4e",
    "1b7e9f3c2a8d4a6f9c3b2e1d8a7f6c4e",
    "6a9f3c2b8e7d1a4f9c3b2e1d8a7f6c4e",
    "4c2a9f3b8e7d1a6f9c3b2e1d8a7f6c4e",
    "8f3a9c2b1e7d4a6f9c3b2e1d8a7f6c4e",
    "3b9f2c1a8e7d4a6f9c3b2e1d8a7f6c4e",
    "7e2a9f3c1b8d4a6f9c3b2e1d8a7f6c4e",
    "2c8f3a9b1e7d4a6f9c3b2e1d8a7f6c4e",
    "9f4a3c2b8e7d1a6f9c3b2e1d8a7f6c4e",
    "1b7e9f3c2a8d4a6f9c3b2e1d8a7f6c4e",
    "6a9f3c2b8e7d1a4f9c3b2e1d8a7f6c4e",
    "4c2a9f3b8e7d1a6f9c3b2e1d8a7f6c4e",
    "8f3a9c2b1e7d4a6f9c3b2e1d8a7f6c4e",
    "3b9f2c1a8e7d4a6f9c3b2e1d8a7f6c4e",
    "7e2a9f3c1b8d4a6f9c3b2e1d8a7f6c4e",
    "2c8f3a9b1e7d4a6f9c3b2e1d8a7f6c4e",
    "9f4a3c2b8e7d1a6f9c3b2e1d8a7f6c4e",
    "1b7e9f3c2a8d4a6f9c3b2e1d8a7f6c4e",
    "6a9f3c2b8e7d1a4f9c3b2e1d8a7f6c4e",
    "4c2a9f3b8e7d1a6f9c3b2e1d8a7f6c4e",
    "8f3a9c2b1e7d4a6f9c3b2e1d8a7f6c4e",
    "3b9f2c1a8e7d4a6f9c3b2e1d8a7f6c4e",
    "7e2a9f3c1b8d4a6f9c3b2e1d8a7f6c4e",
    "2c8f3a9b1e7d4a6f9c3b2e1d8a7f6c4e",
    "9f4a3c2b8e7d1a6f9c3b2e1d8a7f6c4e",
    "1b7e9f3c2a8d4a6f9c3b2e1d8a7f6c4e"
}

-- Create key lookup table
local keyLookup = {}
for _, key in pairs(keys) do
    keyLookup[key] = true
end

-- Create GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = config.name
screenGui.Parent = coreGui
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 380, 0, 180) -- Increased size (was 320x140)
mainFrame.Position = UDim2.new(0.5, -190, 0.5, -90) -- Adjusted position to center
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35) -- Initial color, will be overridden by gradient
mainFrame.BackgroundTransparency = 1
mainFrame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = mainFrame

local frameStroke = Instance.new("UIStroke")
frameStroke.Color = Color3.fromRGB(255, 255, 255)
frameStroke.Thickness = 1
frameStroke.Transparency = 1
frameStroke.Parent = mainFrame

-- Gradient for wave-like purple transition
local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(220, 0, 255)), -- Brighter purple
    ColorSequenceKeypoint.new(0.33, Color3.fromRGB(80, 0, 180)), -- Darker purple
    ColorSequenceKeypoint.new(0.66, Color3.fromRGB(220, 0, 255)), -- Brighter purple
    ColorSequenceKeypoint.new(1, Color3.fromRGB(80, 0, 180)) -- Darker purple
})
gradient.Rotation = 0
gradient.Parent = mainFrame

-- Wave-like animation for gradient
local function animateGradient()
    while true do
        local tweenInfo = TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true)
        local tween = tweenService:Create(gradient, tweenInfo, {Offset = Vector2.new(2, 0)})
        tween:Play()
        tween.Completed:Wait()
        gradient.Offset = Vector2.new(-2, 0)
    end
end

local keyInput = Instance.new("TextBox")
keyInput.PlaceholderText = "Enter key (32 characters)..."
keyInput.Size = UDim2.new(0, 340, 0, 60) -- Increased size (was 280x50)
keyInput.Position = UDim2.new(0.5, -170, 0, 20)
keyInput.Font = Enum.Font.Gotham
keyInput.TextSize = 16
keyInput.TextColor3 = Color3.fromRGB(0, 0, 0)
keyInput.BackgroundColor3 = Color3.fromRGB(245, 245, 245)
keyInput.BackgroundTransparency = 1
keyInput.TextTransparency = 1
keyInput.ClearTextOnFocus = false
keyInput.Parent = mainFrame

local inputCorner = Instance.new("UICorner")
inputCorner.CornerRadius = UDim.new(0, 8)
inputCorner.Parent = keyInput

local verifyButton = Instance.new("TextButton")
verifyButton.Text = "Verify"
verifyButton.Size = UDim2.new(0, 340, 0, 60) -- Increased size (was 280x50)
verifyButton.Position = UDim2.new(0.5, -170, 0, 90)
verifyButton.Font = Enum.Font.GothamBold
verifyButton.TextSize = 16
verifyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
verifyButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
verifyButton.TextTransparency = 1
verifyButton.BackgroundTransparency = 1
verifyButton.Parent = mainFrame

local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 8)
buttonCorner.Parent = verifyButton

local buttonStroke = Instance.new("UIStroke")
buttonStroke.Color = Color3.fromRGB(0, 150, 0)
buttonStroke.Thickness = 2
buttonStroke.Transparency = 1
buttonStroke.Parent = verifyButton

-- Fade-in animation
local function fadeInGui()
    local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local frameTween = tweenService:Create(mainFrame, tweenInfo, {BackgroundTransparency = 0})
    
    for _, descendant in pairs(mainFrame:GetDescendants()) do
        if descendant:IsA("GuiObject") then
            if descendant:IsA("TextLabel") or descendant:IsA("TextButton") or descendant:IsA("TextBox") then
                tweenService:Create(descendant, tweenInfo, {TextTransparency = 0, BackgroundTransparency = 0}):Play()
            end
        elseif descendant:IsA("UIStroke") then
            tweenService:Create(descendant, tweenInfo, {Transparency = 0}):Play()
        end
    end
    
    frameTween:Play()
end

-- Fade-out animation for closing GUI
local function closeGui()
    local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.In)
    local frameTween = tweenService:Create(mainFrame, tweenInfo, {BackgroundTransparency = 1})
    
    for _, descendant in pairs(mainFrame:GetDescendants()) do
        if descendant:IsA("GuiObject") then
            if descendant:IsA("TextLabel") or descendant:IsA("TextButton") or descendant:IsA("TextBox") then
                tweenService:Create(descendant, tweenInfo, {TextTransparency = 1, BackgroundTransparency = 1}):Play()
            end
        elseif descendant:IsA("UIStroke") then
            tweenService:Create(descendant, tweenInfo, {Transparency = 1}):Play()
        end
    end
    
    frameTween:Play()
    frameTween.Completed:Connect(function()
        screenGui:Destroy()
    end)
end

-- Key verification function
local function verifyKey(inputKey)
    task.wait(1)
    local success, errorMsg = pcall(function()
        local scriptUrl = keyLookup[inputKey] and config.paidScript or config.freeScript
        local script = game:HttpGet(scriptUrl, true)
        loadstring(script)()
    end)
    
    if success then
        closeGui()
    end
end

-- Connect events
verifyButton.MouseButton1Click:Connect(function()
    verifyKey(keyInput.Text)
end)
keyInput.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        verifyKey(keyInput.Text)
    end
end)
userInputService.InputBegan:Connect(function(input, gameProcessed)
    if input.KeyCode == Enum.KeyCode.Escape and not gameProcessed then
        closeGui()
    end
end)

-- Start fade-in animation and gradient animation
fadeInGui()
spawn(animateGradient)
